{"version":3,"sources":["site.js"],"names":["localConfig","plugin","prettify","css","js","prodConfig","siteConfig","$","extend","isProdEnv","location","hostname","loadjs","url","callback","error","script","document","createElement","onload","onerror","src","getElementsByTagName","appendChild","loadcss","link","href","rel","setActive","$parent","$this","find","removeClass","addClass","throttle","fn","delay","must","timer","startTime","Date","e","context","this","clearTimeout","setTimeout","call","nav","changeActive","$el","$nav","setSlideblock","isMobile","l","position","left","parseInt","$slideblock","width","transform","$active","hover","window","resize","setFooter","height","outerHeight","zIndex","bottom","show","mobileHandler","click","toggleClass","on","event","$target","target","parents","length","hasClass","loadedPrettifyHandler","prettyPrint","split","forEach","v","get","msg","text","offset","hash","scrollTop","top","$win","$doc","$footer","$menu","$main","handler","clientHeight","pageHeight","footerHeight","touchFooter","test","localStorage","setItem","getItem","append","checkInViewBox","each","effect","userClickPaused","pause","open","ctrlTpl","instance","eventType","clientX","attr","bind","index","createInstance","$instance","eq","scroll"],"mappings":"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","file":"site.js","sourcesContent":["var localConfig = {\r\n    plugin: {\r\n        prettify: {\r\n            css: '/plugin/prettify/prettify.min.css',\r\n            js: '/plugin/prettify/prettify.min.js'\r\n        }\r\n    }\r\n};\r\nvar prodConfig = {\r\n    plugin: {\r\n        prettify: {\r\n            css: '//cdn.bootcss.com/prettify/r298/prettify.min.css',\r\n            js: '//cdn.bootcss.com/prettify/r298/prettify.min.js'\r\n        }\r\n    }\r\n};\r\nvar siteConfig = $.extend( true, {}, localConfig );\r\nvar isProdEnv = location.hostname !== 'localhost' &&\r\n    location.hostname !== '127.0.0.1';\r\nif( isProdEnv ){\r\n    $.extend( true, siteConfig, prodConfig );\r\n}\r\n\r\n$(function(){\r\n    // common function\r\n    function loadjs( url, callback, error ){\r\n        var script = document.createElement('script');\r\n        script.onload = callback || function(){};\r\n        script.onerror = error || function(){};\r\n        script.src = url;\r\n        document.getElementsByTagName('head')[0].appendChild( script );\r\n    }\r\n    function loadcss( url, callback, error ){\r\n        var link = document.createElement('link');\r\n        link.onload = callback || function(){};\r\n        link.onerror = error || function(){};\r\n        link.href = url;\r\n        link.rel = 'stylesheet';\r\n        document.getElementsByTagName('head')[0].appendChild( link );\r\n    }\r\n    function setActive( $parent, $this ){\r\n        $parent.find('.active').removeClass('active');\r\n        $this.addClass('active');\r\n    }\r\n    function throttle( fn, delay, must ){\r\n        if( !delay && !must ){\r\n            return fn;\r\n        }\r\n        var startTime = new Date(),\r\n            timer;\r\n        return function( e ){\r\n            var context = this;\r\n            if( delay ){\r\n                clearTimeout( timer );\r\n                timer = setTimeout(function(){\r\n                    fn.call( context, e );\r\n                }, delay );\r\n            }else if( new Date() - startTime > must ){\r\n                startTime = new Date();\r\n                fn.call( context, e );\r\n            }\r\n        }\r\n    }\r\n\r\n    window.isMobile = $('.mobile-menu').css('display') === 'block';\r\n    $(window).resize(function(){\r\n        window.isMobile = $('.mobile-menu').css('display') === 'block';\r\n        setFooter();\r\n    });\r\n\r\n    // nav PC端导航栏滑动效果\r\n    function nav(){\r\n        var $nav = $('.com-header .nav');\r\n        var $active = $nav.find('.active');\r\n        var $slideblock = $nav.find('.slideblock');\r\n\r\n        function changeActive( $el ){\r\n            setActive( $nav, $el );\r\n            setSlideblock( $el );\r\n        }\r\n\r\n        function setSlideblock( $el ){\r\n            if( !isMobile ){\r\n                var l = $el.position().left + parseInt($el.css('paddingLeft')) + .5;\r\n                $slideblock.css({\r\n                    width: $el.width(),\r\n                    transform: 'translate('+ l +'px,0)'\r\n                });\r\n            }\r\n        }\r\n\r\n        setSlideblock( $active );\r\n        setTimeout(function(){\r\n            $slideblock.addClass('animation').removeClass('hidden');\r\n        }, 0 );\r\n\r\n        $nav.find('a').hover(function(){\r\n            changeActive( $(this) );\r\n        }, function(){\r\n            changeActive( $active );\r\n        });\r\n\r\n        $(window).resize(throttle( function(){\r\n            setSlideblock( $nav.find('.active') );\r\n        }, 400 ));\r\n    }\r\n    nav();\r\n\r\n    // footer 当页面不够高时，设置页脚为绝对定位到底部\r\n    function setFooter(){\r\n        if( $('body').height() > $('.com-header').outerHeight() +\r\n            $('.com-body').outerHeight() +\r\n            $('.com-footer').outerHeight() ){\r\n            $('.com-footer').css({\r\n                width: '100%',\r\n                position: 'absolute',\r\n                zIndex: 8,\r\n                bottom: 0\r\n            });\r\n        }\r\n        $('.com-footer').show();\r\n    }\r\n    setFooter();\r\n\r\n    // 数据统计\r\n    (function(){\r\n        if( isProdEnv ){\r\n            setTimeout(function(){\r\n                loadjs('https://s11.cnzz.com/z_stat.php?id=1260419466&web_id=1260419466');\r\n            }, 1000 );\r\n        }\r\n    })();\r\n\r\n    if( $('#page-example').length ){\r\n\r\n        // load and prettify code templates\r\n        var loadedPrettifyHandler = function(){\r\n            if( $('.prettyprint').length ){\r\n                prettyPrint();\r\n            }else if( $('.quick-getting').length ){\r\n                'import use use-method default-config common-config'.split(' ').forEach(function( v ){\r\n                    $.get('/code-tpl/'+ v +'.html', function( msg ){\r\n                        $( '.' + v ).text( msg ).addClass( 'prettyprint' );\r\n                        prettyPrint();\r\n                        if( v === 'common-config' ){\r\n                            var offset = $(location.hash).offset();\r\n                            offset && $(window).scrollTop( offset.top );\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        };\r\n        loadcss( siteConfig.plugin.prettify.css, function () {}, function(){\r\n            loadcss( localConfig.plugin.prettify.css );\r\n        });\r\n        loadjs( siteConfig.plugin.prettify.js, loadedPrettifyHandler, function(){\r\n            loadjs( localConfig.plugin.prettify.js, loadedPrettifyHandler );\r\n        });\r\n\r\n        // 菜单栏固定\r\n        (function(){\r\n            var $win = $(window);\r\n            var $doc = $(document);\r\n            var $footer = $('.com-footer');\r\n            var $menu = $('#page-example > .com-body > .menu');\r\n            var $main = $('#page-example > .com-body > .main');\r\n            var handler = function(){\r\n                if( !isMobile ){\r\n                    var scrollTop = $win.scrollTop();\r\n                    var clientHeight = $win.height();\r\n                    var pageHeight = $doc.outerHeight();\r\n                    var footerHeight = $footer.outerHeight();\r\n                    var touchFooter = scrollTop + clientHeight > pageHeight - footerHeight;\r\n                    $menu[ scrollTop > $main.offset().top ? 'addClass' : 'removeClass' ]('fixed');\r\n                    $menu.css('bottom', touchFooter ? footerHeight : 0);\r\n                }\r\n            };\r\n            handler();\r\n            $win.on('resize, scroll', handler);\r\n        })();\r\n    }\r\n\r\n    // flag 必读图标的状态\r\n    if( !/\\/examples\\/quick-getting/i.test( location.href ) ){\r\n        if( !window.localStorage.getItem( 'read' ) ){\r\n            $('.com-body >.menu >h5:eq(1), .example-menu a:eq(1)').append(\r\n                '<i class=\"essential\">必读</i>'\r\n            );\r\n        }\r\n    }else{\r\n        window.localStorage.setItem( 'read', true );\r\n    }\r\n\r\n    // Demo实例的优化，控制\r\n    (function(){\r\n        var ctrlTpl =\r\n            '<div class=\"ctrl\">' +\r\n                '<div class=\"btn btn-default open\">开启·OPEN</div>' +\r\n                '<div class=\"btn btn-default pause\">暂停·PAUSE</div>' +\r\n            '</div>';\r\n\r\n        var handler = function( instance ){\r\n            var $this = $(this);\r\n            var eventType = $this.hasClass('open') ? 'open' : 'pause';\r\n            // 如果有clientX，表示是事件处理函数，反之则是函数调用\r\n            var instance = instance.clientX ?\r\n                $this.parents('.instance')[0] : instance;\r\n\r\n            if( instance.effect ){\r\n                instance.effect[ eventType ]();\r\n                instance.userClickPaused = eventType === 'pause';\r\n            }\r\n        };\r\n\r\n        $('.instance').each(function(){\r\n            if( $(this).attr('data-ctrl') !== 'none' ){\r\n                $(this).append( ctrlTpl )\r\n                    .on('click.ctrl', '.ctrl .btn', handler );\r\n            }\r\n        });\r\n\r\n        $('#first-instance-ctrl').on('click', '.btn', function(){\r\n            handler.call( this, $('.instance:first')[0] );\r\n        });\r\n\r\n        // 创建公共的方式用于创建并关联Demo实例\r\n        window.bind = function( index, createInstance ){\r\n            var $instance = $('.instance').eq( index );\r\n            $instance[0].effect = createInstance( $instance.find('.demo')[0] );\r\n        };\r\n\r\n        // 检查动画元素是否在可视区内，不在则暂停运动，在则打开运动\r\n        function checkInViewBox(){\r\n            var scrollTop = $(window).scrollTop();\r\n            var clientHeight= $(window).height();\r\n            $('.instance').each(function(){\r\n                if( this.effect && !this.userClickPaused ){\r\n                    var $this = $(this);\r\n                    var top = $this.offset().top;\r\n                    var outerHeight = $this.outerHeight();\r\n\r\n                    if( scrollTop > top + outerHeight ||\r\n                        scrollTop + clientHeight < top ){\r\n\r\n                        // 不在可视区范围内\r\n                        this.effect.pause();\r\n                    }else{\r\n                        this.effect.open();\r\n                    }\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        // 让所有的实例都创建完毕再执行 演示Demo的性能优化\r\n        setTimeout(function(){\r\n            checkInViewBox();\r\n            var timer = null;\r\n            function throttle(){\r\n                clearTimeout( timer );\r\n                timer = setTimeout(function(){\r\n                    checkInViewBox();\r\n                }, 200 );\r\n            }\r\n            $(window).resize( throttle )\r\n                .scroll( throttle );\r\n        }, 0 );\r\n    })();\r\n\r\n    // mobile 移动端页面UI、事件等处理\r\n    function mobileHandler(){\r\n        $('.mobile-menu').click(function(){\r\n            $('.com-header .nav').toggleClass('menu-show');\r\n        });\r\n\r\n        $(document).on('click.hideMenu', function( event ){\r\n            var $target = $(event.target);\r\n            if( !$target.parents('.nav').length &&\r\n                !$target.parents('.mobile-menu').length &&\r\n                !$target.hasClass('mobile-menu') &&\r\n                !$target.hasClass('menu-show') ){\r\n                $('.com-header .nav').removeClass('menu-show');\r\n            }\r\n        });\r\n    }\r\n    mobileHandler();\r\n});"],"sourceRoot":"/source/"}